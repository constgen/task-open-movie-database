{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 77ea016bea7660999124","webpack:///./src/utils/format-url-query.js","webpack:///./src/services/http.service.js","webpack:///./src/services/movies.service.js","webpack:///./src/utils/fp.js","webpack:///./src/templates/movie-item-html.template.js","webpack:///./src/utils/get-scroll-parent.js","webpack:///./src/utils/is-visible-in-scroll-parent.js","webpack:///./src/controllers/movie-search.controller.js","webpack:///./src/utils/dom.js","webpack:///./src/utils/math.js"],"names":[],"mappings":"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","file":"task-open-movie-database.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 77ea016bea7660999124","export default function formatUrlQuery (query) {\n\tlet searchQuery = '';\n\n\tif (typeof query === 'object') {\n\t\tsearchQuery = (function () {\n\t\t\tlet params = Object.keys(query);\n\t\t\tlet i = -1;\n\t\t\tlet param;\n\t\t\tlet search = [];\n\n\t\t\twhile (++i in params) {\n\t\t\t\tparam = params[i];\n\t\t\t\tsearch.push(`${param}=${query[param]}`);\n\t\t\t}\n\t\t\treturn search.length ? (`?${encodeURI(search.join('&'))}`) : '';\n\t\t}());\n\t}\n\n\treturn searchQuery;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/format-url-query.js\n// module id = null\n// module chunks = ","import formatUrlQuery from '../utils/format-url-query';\n\nexport function request ({ method = 'GET', url, params = {}, body = null }) {\n\tlet xhr = new XMLHttpRequest();\n\tlet requestUrl = url + formatUrlQuery(params);\n\n\txhr.open(method, requestUrl, true);\n\txhr.responseType = 'text';\n\n\treturn new Promise(function (resolve, reject) {\n\t\txhr.onreadystatechange = function () {\n\t\t\tif (this.readyState !== this.DONE) return;\n\n\t\t\tif (\n\t\t\t\t(this.status >= 200 && this.status < 300)\n\t\t\t\t|| (this.status === 0 && this.responseText) // local\n\t\t\t) {\n\t\t\t\tresolve({ body: this.responseText });\n\t\t\t}\n\t\t\telse if (this.status === 304) {\n\t\t\t\tresolve({ body: undefined });\n\t\t\t}\n\t\t\telse {\n\t\t\t\treject(new Error(this.statusText));\n\t\t\t}\n\t\t\tthis.onreadystatechange = null;\n\t\t\txhr = undefined;\n\t\t};\n\n\t\ttry {\n\t\t\txhr.send(body);\n\t\t}\n\t\tcatch (err) { // crossdomain\n\t\t\treject(err);\n\t\t}\n\t}).then(function (response) {\n\t\tresponse.body = response.body ? JSON.parse(response.body) : undefined;\n\t\treturn response;\n\t});\n}\n\nexport default {\n\tget (url, params) {\n\t\treturn request({ method: 'GET', url, params });\n\t},\n\n\tpost () {\n\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/services/http.service.js\n// module id = null\n// module chunks = ","import http from './http.service';\n\nconst API_KEY = '338f9a63';\nconst API_URL = `https://www.omdbapi.com`;\n\nfunction getItems ({ body }) {\n\tif (body.Error) {\n\t\tthrow new Error(body.Error);\n\t}\n\treturn body.Search;\n}\n\nexport default {\n\tsearch (text, page = 1) {\n\t\treturn http.get(API_URL, {\n\t\t\tapikey: API_KEY,\n\t\t\ts: text,\n\t\t\tr: 'json',\n\t\t\tpage\n\t\t}).then(getItems);\n\t}\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/services/movies.service.js\n// module id = null\n// module chunks = ","export function curry (func) {\n\treturn function currify (...args) {\n\t\treturn args.length >= func.length ?\n\t\t\tfunc.apply(null, args) :\n\t\t\tcurrify.bind(null, ...args);\n\t};\n}\n\nexport let map = curry(function map (callback, array) {\n\treturn array.map(callback);\n});\n\nexport let reduce = curry(function reduce (callback, array) {\n\treturn array.reduce(callback);\n});\n\n\nexport let forEach = curry(function forEach (callback, array) {\n\treturn array.forEach(callback);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/fp.js\n// module id = null\n// module chunks = ","const IMDB_URL = 'https://www.imdb.com/title';\n\nexport default function movieItemHtml ({\n\tTitle, Year, imdbID, Poster, Type\n}) {\n\treturn `<li class=\"movie-item\">\n\t\t<a title=\"${Title} (${Year})\" href=\"${IMDB_URL}/${imdbID}\" class=\"link\" target=\"_blank\">\n\t\t\t<img src=\"${Poster}\" alt=\"${Type} ${Title}\" class=\"image\">\n\t\t\t<h3 class=\"title\">${Title}</h3>\n\t\t</a>\n\t</li>`;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/templates/movie-item-html.template.js\n// module id = null\n// module chunks = ","function getParents (node, parents = []) {\n\tlet parent = node.parentNode;\n\tlet noMoreParents = !node.parentNode || node.parentNode === document.documentElement;\n\n\tif (noMoreParents) {\n\t\treturn parents;\n\t}\n\treturn getParents(parent, parents.concat([parent]));\n}\n\nfunction getStyle (node, prop) {\n\treturn getComputedStyle(node, null).getPropertyValue(prop);\n}\n\nfunction getOverflowStyle (node) {\n\treturn [\n\t\tgetStyle(node, 'overflow'),\n\t\tgetStyle(node, 'overflow-y'),\n\t\tgetStyle(node, 'overflow-x')\n\t].join('-');\n}\n\nfunction isScrollable (node) {\n\tlet regex = /(\\bauto\\b|\\bscroll\\b)/;\n\n\treturn regex.test(getOverflowStyle(node));\n}\n\nexport default function getScrollParent (node) {\n\tlet parents = getParents(node);\n\tlet scrollableParent = parents.find(isScrollable);\n\n\n\treturn scrollableParent\n\t\t|| document.scrollingElement\n\t\t|| document.documentElement;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/get-scroll-parent.js\n// module id = null\n// module chunks = ","function getPositionInScrollParent (elem, parent) {\n\treturn {\n\t\tleft: elem.offsetLeft - parent.offsetLeft - parent.scrollLeft,\n\t\ttop: elem.offsetTop - parent.offsetTop - parent.scrollTop\n\t};\n}\n\n\nexport default function isVisibleInScrollParent (elem, scrollParent) {\n\tlet position = getPositionInScrollParent(elem, scrollParent);\n\n\tlet parentHeight = scrollParent.offsetHeight;\n\tlet parentWidth = scrollParent.offsetWidth;\n\tlet elemHeight = elem.offsetHeight;\n\tlet elemWidth = elem.offsetWidth;\n\n\tlet verticalyVisible = (position.top + elemHeight > 0) && (position.top < parentHeight);\n\tlet horizontalyVisible = (position.left + elemWidth > 0) && (position.left < parentWidth);\n\tlet visble = verticalyVisible && horizontalyVisible;\n\n\treturn visble;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/is-visible-in-scroll-parent.js\n// module id = null\n// module chunks = ","import movies from '../services/movies.service';\nimport { on, insertHtmlTo, appendHtmlTo, preventEvent } from '../utils/dom';\nimport { map, reduce } from '../utils/fp';\nimport { sum } from '../utils/math';\nimport movieItemHtml from '../templates/movie-item-html.template';\nimport getScrollParent from '../utils/get-scroll-parent';\nimport isVisibleInScrollParent from '../utils/is-visible-in-scroll-parent';\n\nlet searchBoxForm = document.querySelector('.movies-search .search-box');\nlet searchInputField = searchBoxForm.querySelector('input');\nlet searchResultElem = document.querySelector('.movies-search .search-results');\nlet errorMessageElem = document.querySelector('.movies-search .search-error');\nlet infinteLoaderElem = document.querySelector('.movies-search .infinite-loader');\nlet infinteScrollElem = getScrollParent(infinteLoaderElem);\nlet insertToResults = insertHtmlTo(searchResultElem);\nlet appendToResults = appendHtmlTo(searchResultElem);\nlet insertToErrors = insertHtmlTo(errorMessageElem);\nlet concat = reduce(sum);\nlet pageIndex = 1;\nlet infinteLoaderVisible;\n\nfunction showSearchError (err) {\n\tinsertToResults('');\n\tinsertToErrors(err.message);\n\treturn err.message;\n}\n\nfunction clearErrors (data) {\n\tinsertToErrors('');\n\treturn data;\n}\n\nfunction searchMovies (filterText) {\n\tmovies\n\t\t.search(filterText)\n\t\t.then(map(movieItemHtml))\n\t\t.then(concat)\n\t\t.then(insertToResults)\n\t\t.then(clearErrors)\n\t\t.catch(showSearchError);\n}\n\nfunction searchNextMovies (filterText) {\n\tpageIndex += 1;\n\tmovies\n\t\t.search(filterText, pageIndex)\n\t\t.then(map(movieItemHtml))\n\t\t.then(concat)\n\t\t.then(appendToResults)\n\t\t.catch(showSearchError);\n}\n\n\nfunction handleSearch () {\n\tlet value = searchInputField.value;\n\n\tsearchMovies(value, pageIndex);\n}\n\nfunction handlePagination (data) {\n\tlet value = searchInputField.value;\n\tlet visible = isVisibleInScrollParent(infinteLoaderElem, infinteScrollElem);\n\tlet visibilityChanged = visible !== infinteLoaderVisible;\n\tlet becameVisible = visibilityChanged && visible;\n\n\tinfinteLoaderVisible = visible;\n\tif (becameVisible && value) {\n\t\tsearchNextMovies(value);\n\t}\n\treturn data;\n}\n\non('submit', searchBoxForm, preventEvent);\non('submit', searchBoxForm, handleSearch);\non('scroll', infinteScrollElem, handlePagination);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/controllers/movie-search.controller.js\n// module id = null\n// module chunks = ","import { curry } from './fp';\n\nexport let on = curry(function on (eventType, element, handler) {\n\telement.addEventListener(eventType, handler, false);\n\treturn handler;\n});\n\nexport let off = curry(function off (eventType, element, handler) {\n\telement.removeEventListener(eventType, handler, false);\n\treturn handler;\n});\n\nexport let insertHtmlTo = curry(function insertHtmlTo (element, htmlString) {\n\telement.innerHTML = htmlString;\n\treturn htmlString;\n});\n\nexport let appendHtmlTo = curry(function appendHtmlTo (element, htmlString) {\n\telement.insertAdjacentHTML('beforeend', htmlString);\n\treturn htmlString;\n});\n\n\nexport function preventEvent (event) {\n\tevent.preventDefault();\n\treturn event;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/dom.js\n// module id = null\n// module chunks = ","import { curry } from './fp';\n\nexport let sum = curry(function sum (valueA, valueB) {\n\treturn valueA + valueB;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils/math.js\n// module id = null\n// module chunks = "],"sourceRoot":""}